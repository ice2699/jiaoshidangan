<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>修改信息</title>
		<!-- 新 Bootstrap5 核心 CSS 文件 -->
		<link rel="stylesheet" href="https://cdn.staticfile.net/twitter-bootstrap/5.1.1/css/bootstrap.min.css">
		<!-- Font Awesome 图标 -->
		<link rel="stylesheet" href="https://cdn.staticfile.net/font-awesome/4.7.0/css/font-awesome.min.css">
		 
		<!-- 最新的 Bootstrap5 核心 JavaScript 文件 -->
		<script src="https://cdn.staticfile.net/twitter-bootstrap/5.1.1/js/bootstrap.bundle.min.js"></script>
		<style>
			#box{
				background-color: darkseagreen;
			}
			#case{
				background-color: mediumseagreen;
			}
			#back{
				background-color: aliceblue;
			}
			.form-control {
				width: 80%;
				padding: 6px 12px;
				border: 1px solid #ced4da;
				border-radius: 4px;
			}
			.error-tip {
				color: #dc3545;
				font-size: 0.875em;
				margin-left: 5px;
			}
			/* 仅保留错误状态的样式 */
			.is-invalid {
				border-color: #dc3545;
			}
		</style>
	</head>
	<body bgcolor="azure">
			<div class="container text-center" >
				<h2 style="color: white; background-color: #28a745; padding: 10px; border-radius: 5px;">修改档案</h2>
				<table class="table table-bordered text-center" >
					<tr>
						<td width=200px id="box">姓名</td>
						<td width=200px id="back">张明</td>
						<td width=200px id="box">性别</td>
						<td width=200px id="back">男</td>
					</tr>
					<tr>
						<td width=200px id="box">年龄</td>
						<td width=200px id="back">41</td>
						<td width=200px id="box">出生日期</td>
						<td width=200px id="back">1984.2.15</td>
					</tr>
					<tr>
						<td width=200px id="box">民族</td>
						<td width=200px id="back">汉</td>
						<td width=200px id="box">教职工号</td>
						<td width=200px id="back">20001</td>
					</tr>
					<tr>
						<td width=200px id="box">政治面貌</td>
						<td width=200px id="back">中共党员</td>
						<td width=200px id="box">学历</td>
						<td width=200px id="back">硕士</td>
					</tr>
					<tr>
						<td width=200px id="box">毕业院校</td>
						<td width=200px id="back">北京大学</td>
						<td width=200px id="box">身份证号</td>
						<td colspan="3" id="back">1238949637632</td>
					</tr>
					<tr>
						<td width=200px id="case">职称</td>
						<td width=200px id="back" >
							<!-- 职称改为输入框 -->
							<input type="text" id="title" class="form-control" placeholder="请输入职称">
							<span id="titletip" class="error-tip"></span>
						</td>
						<td width=200px id="case">联系方式</td>
						<td width=200px id="back">
							<input type="tel" id="phone" class="form-control" placeholder="请输入手机号码">
							<span id="phonetip" class="error-tip"></span>
						</td>
					</tr>
					<tr>
						<td width=200px id="case">电子邮箱</td>
						<td width=200px id="back">
							<input type="email" id="email" class="form-control" placeholder="请输入电子邮箱">
							<span id="emailtip" class="error-tip"></span>
						</td>
						<td width=200px id="case">学院学科</td>
						<td width=200px id="back">
							<input type="text" id="discipline" class="form-control" placeholder="请输入学院学科">
							<span id="disciplinetip" class="error-tip"></span>
						</td>
					</tr>
					<tr>
						<td width=200px id="case">家庭住址</td>
						<td colspan="3" id="back">
							<input type="text" id="address" class="form-control" placeholder="请输入家庭住址">
							<span id="addresstip" class="error-tip"></span>
						</td>
					</tr>
				</table>
				<button onclick="validateForm()" class="btn btn-info ">
					<i class="fa fa-save"></i> 保存
				</button>
	</body>
	<script>
		// 简化的正则表达式
		const regexPatterns = {
			// 职称：非空，2-10个字符
			title: /^\S{2,10}$/,
			// 手机号码：11位数字
			phone: /^\d{11}$/,
			// 电子邮箱：包含@符号和至少一个点
			email: /^[^@]+@[^@]+\.[^@]+$/,
			// 学院学科：非空
			discipline: /\S+/,
			// 家庭住址：非空
			address: /\S+/
		};
		
		// 验证表单
		function validateForm() {
			let flag = true;
			// 清空所有错误提示
			document.querySelectorAll('.error-tip').forEach(tip => {
				tip.innerText = '';
			});
			// 移除所有输入框的错误样式
			document.querySelectorAll('.form-control').forEach(input => {
				input.classList.remove('is-invalid');
			});
			
			// 验证职称
			const title = document.getElementById('title');
			if (!regexPatterns.title.test(title.value.trim())) {
				document.getElementById('titletip').innerText = "请输入2-10个字符的职称";
				title.classList.add('is-invalid');
				flag = false;
			}
			
			// 验证手机号码
			const phone = document.getElementById('phone');
			if (!regexPatterns.phone.test(phone.value.trim())) {
				document.getElementById('phonetip').innerText = "必须是11位数字";
				phone.classList.add('is-invalid');
				flag = false;
			}
			
			// 验证电子邮箱
			const email = document.getElementById('email');
			if (!regexPatterns.email.test(email.value.trim())) {
				document.getElementById('emailtip').innerText = "请输入有效的电子邮箱";
				email.classList.add('is-invalid');
				flag = false;
			}
			
			// 验证学院学科
			const discipline = document.getElementById('discipline');
			if (!regexPatterns.discipline.test(discipline.value.trim())) {
				document.getElementById('disciplinetip').innerText = "学院学科不能为空";
				discipline.classList.add('is-invalid');
				flag = false;
			}
			
			// 验证家庭住址
			const address = document.getElementById('address');
			if (!regexPatterns.address.test(address.value.trim())) {
				document.getElementById('addresstip').innerText = "家庭住址不能为空";
				address.classList.add('is-invalid');
				flag = false;
			}
			
			// 如果表单验证通过，显示成功消息
			if (flag) {
				alert('信息保存成功！');
				// 这里可以添加实际保存数据的逻辑
			}
			
			return flag;
		}
		
		// 为输入框添加实时验证
		document.querySelectorAll('.form-control').forEach(input => {
			input.addEventListener('blur', function() {
				// 清空错误提示
				document.getElementById(this.id + 'tip').innerText = '';
				this.classList.remove('is-invalid');
				
				if (regexPatterns[this.id]) {
					if (!regexPatterns[this.id].test(this.value.trim())) {
						switch(this.id) {
							case 'title':
								document.getElementById('titletip').innerText = "请输入2-10个字符的职称";
								break;
							case 'phone':
								document.getElementById('phonetip').innerText = "必须是11位数字";
								break;
							case 'email':
								document.getElementById('emailtip').innerText = "请输入有效的电子邮箱";
								break;
							case 'discipline':
								document.getElementById('disciplinetip').innerText = "学院学科不能为空";
								break;
							case 'address':
								document.getElementById('addresstip').innerText = "家庭住址不能为空";
								break;
						}
						this.classList.add('is-invalid');
					}
				}
			});
		});
	</script>
</html>
    